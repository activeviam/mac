{
  "style" : { },
  "showTitleBar" : false,
  "body" : {
    "pages" : [ {
      "content" : [ {
        "key" : "1",
        "bookmark" : {
          "name" : "Untitled Text Editor",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "# Common Pitfalls\n\nThis bookmarks presents some common problems that can be exposed using MAC.\n\nEach following page presents one of these problems along with:\n* causes\n* usual symptoms\n* suggestions and links to other more detailed bookmarks for further analysis\n\nThese pages use the statistics that are currently loaded into MAC and will try to suggest a view that exposes best what to look out for when trying to detect the described problems.\n\nThey serve only as a quick indicators for common problems, detailed analysis may still need to be done using more detailed views."
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      } ],
      "layout" : {
        "ck" : "1"
      },
      "name" : "Common pitfalls"
    }, {
      "content" : [ {
        "key" : "1",
        "bookmark" : {
          "name" : "Untitled Text Editor",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "# Indexes are too large\nIndexes often constitute the largest direct memory consumer for stores, so reducing their size if possible could reduce the memory footprint of your application.\n\nThe following table shows the most-consuming indexes for the largest stores:"
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      }, {
        "key" : "2",
        "bookmark" : {
          "name" : "Untitled Pivot Table",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "serverUrl" : "",
              "mdx" : "SELECT NON EMPTY {[Measures].[DirectMemory.SUM], [Measures].[DirectMemory.Ratio]} ON COLUMNS, NON EMPTY Order(Crossjoin(DrilldownLevel([Owners].[Owner].[ALL].[AllMember]), Hierarchize(DrilldownLevel([Indices].[Index Type].[ALL].[AllMember])), DrilldownLevel([Indices].[Indexed Fields].[ALL].[AllMember])), [Measures].[DirectMemory.SUM], DESC) ON ROWS FROM [MemoryCube] CELL PROPERTIES BACK_COLOR, FONT_FLAGS, FORE_COLOR, FORMATTED_VALUE, VALUE",
              "contextValues" : { },
              "updateMode" : "once",
              "ranges" : {
                "row" : {
                  "chunkSize" : 2000,
                  "thresholdPercentage" : 0.1
                },
                "column" : {
                  "chunkSize" : 50,
                  "thresholdPercentage" : 0.2
                }
              },
              "configuration" : {
                "tabular" : {
                  "pinnedHeaderSelector" : "member",
                  "sortingMode" : "non-breaking",
                  "addButtonFilter" : "numeric",
                  "cellRenderers" : [ "tree-layout" ],
                  "statisticsShown" : true,
                  "columnsGroups" : [ {
                    "captionProducer" : "firstColumn",
                    "cellFactory" : "kpi-status",
                    "selector" : "kpi-status"
                  }, {
                    "captionProducer" : "firstColumn",
                    "cellFactory" : "lookup",
                    "selector" : "lookup"
                  }, {
                    "captionProducer" : "expiry",
                    "cellFactory" : "expiry",
                    "selector" : "kpi-expiry"
                  }, {
                    "captionProducer" : "columnMerge",
                    "cellFactory" : {
                      "args" : { },
                      "key" : "treeCells"
                    },
                    "selector" : "member"
                  } ],
                  "hideAddButton" : true,
                  "defaultOptions" : { },
                  "columns" : [ {
                    "key" : "c-treeCells-member",
                    "width" : 508
                  } ],
                  "expansion" : {
                    "automaticExpansion" : true
                  }
                }
              }
            },
            "containerKey" : "pivot-table"
          },
          "writable" : true
        }
      }, {
        "key" : "3",
        "bookmark" : {
          "name" : "Recommendations",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : true,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "The size of an index depends on the cardinality of the data it indexes. Reducing the number of fields taken into account by an index can reduce its size as a result.\n\nOmitting a field from an index can drastically impact the performance on queries that rely on them, so whether or not this is possible depends on your use case. It may be that some indexes need to be as large as they are to ensure query performance.\n\nLastly, changing the data model can change which indexes need to be created. Improving the data model could result in smaller store sizes overall.\n\n>*Further analysis regarding indexes can be done with the [indexes bookmark](#/dashboard/dictionaries_indexes).*"
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      }, {
        "key" : "4",
        "bookmark" : {
          "name" : "Untitled Chart",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "configuration" : {
                "type" : "plotly-line-chart",
                "mapping" : {
                  "xAxis" : [ "[Owners].[Owner].[Owner]", "[Indices].[Indexed Fields].[Indexed Fields]" ],
                  "values" : [ "[Measures].[DirectMemory.SUM]" ],
                  "splitBy" : [ ],
                  "horizontalSubplots" : [ ],
                  "verticalSubplots" : [ ]
                },
                "switchedTo" : "plotly-tree-map"
              },
              "query" : {
                "serverUrl" : "",
                "mdx" : "SELECT NON EMPTY [Measures].[DirectMemory.SUM] ON COLUMNS, NON EMPTY TopPercent(Crossjoin([Owners].[Owner].[Owner].Members, [Indices].[Indexed Fields].[Indexed Fields].Members), 95, [Measures].[DirectMemory.SUM]) ON ROWS FROM [MemoryCube]",
                "contextValues" : { },
                "updateMode" : "once"
              }
            },
            "containerKey" : "chart"
          },
          "writable" : true
        }
      }, {
        "key" : "5",
        "bookmark" : {
          "name" : "Owner filter",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : true,
            "body" : {
              "configuration" : {
                "displayedAsSelect" : true,
                "multipleSelection" : false
              },
              "filterKey" : "explicit",
              "levelDetails" : {
                "cube" : "MemoryCube",
                "dimension" : "Owners",
                "hierarchy" : "Owner",
                "level" : "Owner",
                "caption" : "Owner"
              }
            },
            "containerKey" : "quick-filter"
          },
          "writable" : true
        }
      } ],
      "layout" : {
        "children" : {
          "0" : {
            "children" : {
              "0" : {
                "ck" : "1",
                "size" : 0.76
              },
              "1" : {
                "ck" : "5",
                "size" : 0.24
              }
            },
            "size" : 0.18,
            "direction" : "row"
          },
          "1" : {
            "children" : {
              "0" : {
                "children" : {
                  "0" : {
                    "ck" : "2",
                    "size" : 0.5
                  },
                  "1" : {
                    "ck" : "4",
                    "size" : 0.5
                  }
                },
                "direction" : "row",
                "size" : 0.74
              },
              "1" : {
                "ck" : "3",
                "size" : 0.26
              }
            },
            "direction" : "column",
            "size" : 0.82
          }
        },
        "direction" : "column"
      },
      "name" : "Large indexes",
      "filters" : {
        "MemoryCube" : [ "[Components].[Component].[ALL].[AllMember].[INDEX]" ]
      }
    }, {
      "content" : [ {
        "key" : "1",
        "bookmark" : {
          "name" : "Untitled Text Editor",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "# Too many members in bitmap/leaf aggregate providers\n\nThe size of the aggregate store of a bitmap or leaf aggregate provider depends on the cardinalities of the hierarchies it handles.\n\nHaving a bitmap provider handle too many members can make it unnecessarily large: it can sometimes be sufficient to have it handle less measures and/or hierarchies depending on the use case.\n\nHere are the largest aggregate store memory footprints in the analyzed application, categorized by owner, aggregate provider id, and measure:"
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      }, {
        "key" : "2",
        "bookmark" : {
          "name" : "Untitled Pivot Table",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "serverUrl" : "",
              "mdx" : "SELECT NON EMPTY Order(Crossjoin(DrilldownLevel([Owners].[Owner].[ALL].[AllMember]), Hierarchize(DrilldownLevel([Aggregate Provider].[ProviderType].[ALL].[AllMember])), Hierarchize(DrilldownLevel([Aggregate Provider].[ProviderId].[ALL].[AllMember])), Hierarchize(DrilldownLevel([Fields].[Field].[ALL].[AllMember]))), [Measures].[DirectMemory.SUM], DESC) ON ROWS, NON EMPTY {[Measures].[DirectMemory.SUM], [Measures].[DirectMemory.Ratio]} ON COLUMNS FROM [MemoryCube] CELL PROPERTIES VALUE, FORMATTED_VALUE, BACK_COLOR, FORE_COLOR, FONT_FLAGS",
              "contextValues" : { },
              "updateMode" : "once",
              "ranges" : {
                "row" : {
                  "chunkSize" : 2000,
                  "thresholdPercentage" : 0.1
                },
                "column" : {
                  "chunkSize" : 50,
                  "thresholdPercentage" : 0.2
                }
              },
              "configuration" : {
                "tabular" : {
                  "pinnedHeaderSelector" : "member",
                  "sortingMode" : "non-breaking",
                  "addButtonFilter" : "numeric",
                  "cellRenderers" : [ "tree-layout" ],
                  "statisticsShown" : true,
                  "columnsGroups" : [ {
                    "captionProducer" : "firstColumn",
                    "cellFactory" : "kpi-status",
                    "selector" : "kpi-status"
                  }, {
                    "captionProducer" : "firstColumn",
                    "cellFactory" : "lookup",
                    "selector" : "lookup"
                  }, {
                    "captionProducer" : "expiry",
                    "cellFactory" : "expiry",
                    "selector" : "kpi-expiry"
                  }, {
                    "captionProducer" : "columnMerge",
                    "cellFactory" : {
                      "args" : { },
                      "key" : "treeCells"
                    },
                    "selector" : "member"
                  } ],
                  "hideAddButton" : true,
                  "defaultOptions" : { },
                  "expansion" : {
                    "automaticExpansion" : true
                  },
                  "isConnected" : true
                }
              }
            },
            "containerKey" : "pivot-table"
          },
          "writable" : true
        }
      }, {
        "key" : "3",
        "bookmark" : {
          "name" : "Recommendations",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : true,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "Consider, for each cube, the hierarchies and measures its most memory-consuming providers handle.\n\nDepending on the queries done on each measure, consider whether or not some hierarchies can be cut from the aggregate provider's handled measures.\n\n>*Further analysis regarding aggregate providers can be done with the [aggregate provider bookmark](#/dashboard/aggregate_providers).*"
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      }, {
        "key" : "4",
        "bookmark" : {
          "name" : "Untitled Chart",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "configuration" : {
                "type" : "plotly-tree-map",
                "mapping" : {
                  "values" : [ "[Measures].[DirectMemory.SUM]" ],
                  "groupBy" : [ ],
                  "splitBy" : [ "[Owners].[Owner].[Owner]", "[Aggregate Provider].[ProviderType].[ProviderType]", "[Aggregate Provider].[ProviderId].[ProviderId]", "[Fields].[Field].[Field]" ],
                  "horizontalSubplots" : [ ],
                  "verticalSubplots" : [ ]
                },
                "subplotModeEnabled" : true
              },
              "query" : {
                "serverUrl" : "",
                "mdx" : "SELECT NON EMPTY [Measures].[DirectMemory.SUM] ON COLUMNS, NON EMPTY TopPercent(Crossjoin([Owners].[Owner].[Owner].Members, [Aggregate Provider].[ProviderType].[ProviderType].Members, [Aggregate Provider].[ProviderId].[ProviderId].Members, [Fields].[Field].[Field].Members), 95, [Measures].[DirectMemory.SUM]) ON ROWS FROM [MemoryCube]",
                "contextValues" : { },
                "updateMode" : "once"
              },
              "isConnected" : true
            },
            "containerKey" : "chart"
          },
          "writable" : true
        }
      }, {
        "key" : "5",
        "bookmark" : {
          "name" : "Owner filter",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : true,
            "body" : {
              "configuration" : {
                "displayedAsSelect" : true,
                "multipleSelection" : false
              },
              "filterKey" : "explicit",
              "levelDetails" : {
                "cube" : "MemoryCube",
                "dimension" : "Owners",
                "hierarchy" : "Owner",
                "level" : "Owner",
                "caption" : "Owner"
              }
            },
            "containerKey" : "quick-filter"
          },
          "writable" : true
        }
      } ],
      "layout" : {
        "children" : {
          "0" : {
            "children" : {
              "0" : {
                "ck" : "1",
                "size" : 0.76
              },
              "1" : {
                "ck" : "5",
                "size" : 0.24
              }
            },
            "size" : 0.22,
            "direction" : "row"
          },
          "1" : {
            "children" : {
              "0" : {
                "children" : {
                  "0" : {
                    "ck" : "2",
                    "size" : 0.37
                  },
                  "1" : {
                    "ck" : "4",
                    "size" : 0.63
                  }
                },
                "size" : 0.78,
                "direction" : "row"
              },
              "1" : {
                "ck" : "3",
                "size" : 0.22
              }
            },
            "direction" : "column",
            "size" : 0.78
          }
        },
        "direction" : "column"
      },
      "name" : "Too many members in bitmaps",
      "filters" : {
        "MemoryCube" : [ "Crossjoin({[Owners].[Owner Type].[ALL].[AllMember].[Cube], [Owners].[Owner Type].[ALL].[AllMember].[Distributed Cube]}, {Except([Aggregate Provider].[ProviderCategory].[ALL].[AllMember].Children, [Aggregate Provider].[ProviderCategory].[ALL].[AllMember].[N/A])}, [Components].[Component].[ALL].[AllMember].[AGGREGATE_STORE])" ]
      }
    }, {
      "content" : [ {
        "key" : "1",
        "bookmark" : {
          "name" : "Untitled Text Editor",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "# Store chunks are oversized\n\nStore chunk size can be configured on a per-store bases using `.withChunkSize(int)` when building each store's description.\n\nIf not specified, the default chunk size is either retrieved from program arguments (`-DdefaultChunkSize`), or deduced from the amount of available memory otherwise (on-and-off-heap). The default value might not be the most suitable depending on the cardinality of the store. In the case where a store has its chunk size configured to be much higher than its cardinality, it is very likely that its chunks will end up being mostly empty, wasting memory unneededly.\n\nBelow are listed for each store the ratio of *non-written rows* in chunks, grouped by field.\n\nPay attention to the value of the measure `NonWrittenRows.Ratio`. It designates the ratio of wasted space due to chunk allocation size being larger than the data they store."
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      }, {
        "key" : "2",
        "bookmark" : {
          "name" : "Untitled Pivot Table",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "serverUrl" : "",
              "mdx" : "SELECT NON EMPTY {[Measures].[DirectMemory.SUM], [Measures].[ChunkSize.SUM], [Measures].[NonWrittenRows.Ratio]} ON COLUMNS, NON EMPTY Crossjoin(Order(DrilldownLevel([Owners].[Owner].[ALL].[AllMember]), [Measures].[DirectMemory.SUM], DESC), Order(Hierarchize(DrilldownLevel([Fields].[Field].[ALL].[AllMember])), [Measures].[NonWrittenRows.Ratio], DESC)) ON ROWS FROM [MemoryCube] CELL PROPERTIES VALUE, FORMATTED_VALUE, BACK_COLOR, FORE_COLOR, FONT_FLAGS",
              "contextValues" : { },
              "updateMode" : "once",
              "refreshInterval" : 10,
              "ranges" : {
                "row" : {
                  "chunkSize" : 2000,
                  "thresholdPercentage" : 0.1
                },
                "column" : {
                  "chunkSize" : 50,
                  "thresholdPercentage" : 0.2
                }
              },
              "configuration" : {
                "tabular" : {
                  "pinnedHeaderSelector" : "member",
                  "sortingMode" : "non-breaking",
                  "addButtonFilter" : "numeric",
                  "cellRenderers" : [ "tree-layout" ],
                  "statisticsShown" : true,
                  "columnsGroups" : [ {
                    "captionProducer" : "firstColumn",
                    "cellFactory" : "kpi-status",
                    "selector" : "kpi-status"
                  }, {
                    "captionProducer" : "firstColumn",
                    "cellFactory" : "lookup",
                    "selector" : "lookup"
                  }, {
                    "captionProducer" : "expiry",
                    "cellFactory" : "expiry",
                    "selector" : "kpi-expiry"
                  }, {
                    "captionProducer" : "columnMerge",
                    "cellFactory" : {
                      "args" : { },
                      "key" : "treeCells"
                    },
                    "selector" : "member"
                  } ],
                  "hideAddButton" : true,
                  "defaultOptions" : { },
                  "columns" : [ {
                    "key" : "c-treeCells-member",
                    "width" : 232
                  }, {
                    "key" : "[Measures].[DirectMemory.SUM]",
                    "width" : 139
                  }, {
                    "key" : "[Measures].[NonWrittenRows.Ratio]",
                    "width" : 152
                  }, {
                    "key" : "[Measures].[ChunkSize.SUM]",
                    "width" : 110
                  } ],
                  "expansion" : {
                    "automaticExpansion" : true
                  }
                }
              }
            },
            "containerKey" : "pivot-table"
          },
          "writable" : true
        }
      }, {
        "key" : "3",
        "bookmark" : {
          "name" : "Recommendations",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : true,
            "body" : {
              "editingMode" : "view",
              "renderer" : "markdown",
              "content" : "If the most compact column of a store proves to have a lot of unused allocated space, this can mean that either:\n* the store chunk size is oversized compared to the data holds, and it can be safely reduced with minor drawback\n* the store partitioning scheme is suboptimal and some partitions (and their chunks as a consequence) have much less data in them\n\nReducing store chunk size more than is needed is also detrimental since this will cause the number of chunks to increase,\nincreasing overhead when doing operations on the store.\n\n>*Further analysis regarding store memory consumption can be done with the [field analysis bookmark](#/dashboard/fields), adding the `NonWrittenRows.Ratio` measure to the relevant pages, or on the [overview bookmark](#/dashboard/overview).*"
            },
            "containerKey" : "rich-text-editor"
          },
          "writable" : true
        }
      }, {
        "key" : "4",
        "bookmark" : {
          "name" : "Untitled Chart",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : false,
            "body" : {
              "configuration" : {
                "type" : "plotly-scatter-plot",
                "mapping" : {
                  "xValues" : [ "[Measures].[NonWrittenRows.Ratio]" ],
                  "yValues" : [ "[Measures].[DirectMemory.SUM]" ],
                  "size" : [ ],
                  "color" : [ "[Owners].[Owner].[Owner]" ],
                  "splitBy" : [ "[Fields].[Field].[Field]" ],
                  "horizontalSubplots" : [ ],
                  "verticalSubplots" : [ ]
                },
                "subplotModeEnabled" : true,
                "style" : {
                  "isTextVisible" : false
                }
              },
              "query" : {
                "serverUrl" : "",
                "mdx" : "SELECT NON EMPTY Crossjoin(Order([Owners].[Owner].[Owner].Members, [Measures].[DirectMemory.SUM], DESC), Order([Fields].[Field].[Field].Members, [Measures].[NonWrittenRows.Ratio], DESC)) ON ROWS, NON EMPTY {[Measures].[NonWrittenRows.Ratio], [Measures].[DirectMemory.SUM]} ON COLUMNS FROM [MemoryCube]",
                "contextValues" : { },
                "updateMode" : "once"
              },
              "isConnected" : true
            },
            "containerKey" : "chart"
          },
          "writable" : true
        }
      }, {
        "key" : "5",
        "bookmark" : {
          "name" : "Owner filter",
          "type" : "container",
          "value" : {
            "style" : { },
            "showTitleBar" : true,
            "body" : {
              "configuration" : {
                "displayedAsSelect" : true,
                "multipleSelection" : false
              },
              "filterKey" : "explicit",
              "levelDetails" : {
                "cube" : "MemoryCube",
                "dimension" : "Owners",
                "hierarchy" : "Owner",
                "level" : "Owner",
                "caption" : "Owner"
              }
            },
            "containerKey" : "quick-filter"
          },
          "writable" : true
        }
      } ],
      "layout" : {
        "children" : {
          "0" : {
            "children" : {
              "0" : {
                "ck" : "1",
                "size" : 0.76
              },
              "1" : {
                "ck" : "5",
                "size" : 0.24
              }
            },
            "size" : 0.21,
            "direction" : "row"
          },
          "1" : {
            "children" : {
              "0" : {
                "children" : {
                  "0" : {
                    "ck" : "2",
                    "size" : 0.43
                  },
                  "1" : {
                    "ck" : "4",
                    "size" : 0.57
                  }
                },
                "direction" : "row",
                "size" : 0.71
              },
              "1" : {
                "ck" : "3",
                "size" : 0.29
              }
            },
            "direction" : "column",
            "size" : 0.79
          }
        },
        "direction" : "column"
      },
      "name" : "Oversized store chunks",
      "filters" : {
        "MemoryCube" : [ "[Owners].[Owner Type].[ALL].[AllMember].[Store]", "Except([Fields].[Field].[Field].Members, {[Fields].[Field].[ALL].[AllMember].[N/A]})" ]
      }
    } ]
  },
  "containerKey" : "dashboard"
}
